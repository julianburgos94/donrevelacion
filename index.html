<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <title>AR - Escanear Dise침o (Video Interactivo)</title>

    <!-- Librer칤as principales -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>

    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0" />

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f1724 0%, #0b3d91 50%, #0b2b5a 100%);
            color: #fff;
        }

        /* Pantalla de inicio */
        #inicio {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 18px;
            text-align: center;
            padding: 24px;
            z-index: 5;
        }

        #inicio h1 {
            margin: 0;
            font-size: 28px;
            text-shadow: 0 6px 24px rgba(0, 0, 0, 0.6);
        }

        #btnEscanear {
            background: linear-gradient(90deg, #00d4ff 0%, #5efce8 100%);
            color: #052023;
            padding: 14px 34px;
            border-radius: 28px;
            border: none;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.18);
            transition: transform .14s ease, box-shadow .14s ease;
        }

        #btnEscanear:hover {
            transform: scale(1.03);
        }

        /* Escena AR */
        #ar-wrapper {
            width: 100vw;
            height: 100vh;
            display: none;
            position: relative;
            z-index: 1;
        }

        .mindar-video {
            position: fixed !important;
            top: 0;
            left: 0;
            width: 100vw !important;
            height: 100vh !important;
            object-fit: cover !important;
            z-index: 0 !important;
        }

        a-scene,
        canvas {
            position: fixed !important;
            top: 0;
            left: 0;
            width: 100vw !important;
            height: 100vh !important;
            background: transparent !important;
            z-index: 1 !important;
        }

        /* Mensaje */
        #hint {
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 13px;
            z-index: 6;
            backdrop-filter: blur(4px);
        }
    </style>
</head>

<body>
    <!-- Pantalla inicial -->
<div id="inicio" style="
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: linear-gradient(180deg, #002b5b 0%, #00509e 100%);
    color: #ffffff;
    font-family: 'Poppins', sans-serif;
    text-align: center;
    padding: 20px;
">

    <!-- Logo -->
    <img src='logo.png' alt='Logo de la empresa' style="
        width: 160px;
        height: auto;
        margin-bottom: 25px;
        filter: drop-shadow(0 0 12px rgba(255,140,0,0.7));
    ">

    <h1 style="
        font-size: 2rem;
        margin-bottom: 10px;
        color: #ff8c00;
        text-shadow: 0 2px 4px rgba(0,0,0,0.4);
    ">游닟 Escanea tu dise침o</h1>

    <p style="
        font-size: 1rem;
        color: #e2e8f0;
        margin-bottom: 30px;
        max-width: 320px;
        line-height: 1.5;
    ">
        Toca el bot칩n para activar la c치mara y ver el video AR.
    </p>

    <button id="btnEscanear" type="button" style="
        background: linear-gradient(90deg, #ff8c00, #ffb347);
        color: #002b5b;
        border: none;
        border-radius: 12px;
        padding: 12px 24px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(255,140,0,0.5);
        transition: all 0.3s ease;
    " 
    onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 15px rgba(255,180,70,0.7)'"
    onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(255,140,0,0.5)'">
        游닝 Escanear dise침o
    </button>

</div>


    <!-- Contenedor AR -->
    <div id="ar-wrapper"></div>

    <script>
        const btn = document.getElementById('btnEscanear');
        const inicio = document.getElementById('inicio');
        const arWrapper = document.getElementById('ar-wrapper');

        btn.addEventListener('click', () => {
            inicio.style.display = 'none';
            arWrapper.style.display = 'block';

            arWrapper.innerHTML = `
        <a-scene
          mindar-image="imageTargetSrc: vid.mind;"
          color-space="sRGB"
          embedded
          renderer="colorManagement:true, physicallyCorrectLights, alpha:true"
          vr-mode-ui="enabled:false"
          device-orientation-permission-ui="enabled:false">

          <a-assets>
            <video id="videoAR" src="video.mp4" preload="auto" playsinline crossorigin="anonymous"></video>
          </a-assets>

          <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>

          <a-entity mindar-image-target="targetIndex: 0">
            <a-video id="videoPlane"
              src="#videoAR"
              position="0 0 0"
              rotation="0 0 0">
            </a-video>
          </a-entity>
        </a-scene>
      `;

            const hint = document.createElement('div');
            hint.id = 'hint';
            hint.innerText = 'Apunta la c치mara a tu dise침o';
            document.body.appendChild(hint);

            const sceneEl = document.querySelector('a-scene');
            const videoEl = document.querySelector('#videoAR');
            const videoPlane = document.querySelector('#videoPlane');

            // 游 Autoplay con sonido (tras primera interacci칩n)
            videoEl.muted = false;

            // 丘뙖잺 Ajustar tama침o seg칰n el video
            videoEl.addEventListener('loadedmetadata', () => {
                const aspect = videoEl.videoWidth / videoEl.videoHeight;
                videoPlane.setAttribute('width', 1);
                videoPlane.setAttribute('height', 1 / aspect);
            });

            sceneEl.addEventListener('targetFound', () => {
                videoPlane.setAttribute('visible', true);
                videoEl.play();
                hint.innerText = '游꿟 Video detectado, reproduciendo';
            });

            sceneEl.addEventListener('targetLost', () => {
                videoPlane.setAttribute('visible', false);
                videoEl.pause();
                hint.innerText = 'Apunta la c치mara a tu dise침o';
            });
        });
    </script>
</body>

</html>